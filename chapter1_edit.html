

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1. Philosophy, overview, commands, syntax &#8212; Stata Programming</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapter1_edit';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="https://brand.jhu.edu/assets/uploads/sites/5/2014/06/university_logo_small_vertical_blue.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="https://brand.jhu.edu/assets/uploads/sites/5/2014/06/university_logo_small_vertical_blue.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Preface
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="chapter1.html">1. Philosophy, overview, directory, simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter2.html">2. Return values, macros, programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter3.html">3. Loops, program syntax, and miscellany</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter4.html">4. Advanced file management, with examples from large national registries</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter5.html">5. Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter6.html">6. Review of weeks 1-5</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter7.html">7. Survival analysis: non-parametric, semi-parametric, parametric</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter8.html">8. Multilevel, hierarchical Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickrefs.html">Quick References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fchapter1_edit.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/chapter1_edit.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>1. Philosophy, overview, commands, syntax</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">1. Philosophy, overview, commands, syntax</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#entry-poll">1.0 Entry poll</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#survey">1.0.1 Survey</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results">1.0.2 Results</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#from-a-simulation">From a simulation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#from-zoom-poll">From zoom Poll</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-format-specifiers-9s">1.0.3 Understanding Format Specifiers: <code class="docutils literal notranslate"><span class="pre">%9s</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#philosophy">1.1 Philosophy</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#know-be-reverent">1.1.2 Know &amp; be Reverent</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#do-on-time">1.1.3 Do &amp; on Time</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">1.2 Overview 🦀</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation">1.3 Simulation</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#detailed-breakdown-of-clinical-trial-data-simulation-bnt162b2-mrna-covid-19-vaccine">Detailed Breakdown of Clinical Trial Data Simulation: BNT162b2 mRNA Covid-19 Vaccine</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-process">Simulation Process</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-preparing-the-environment">Step 1: Preparing the Environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-random-treatment-assignment">Step 2: Random Treatment Assignment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-demographic-characteristics">Step 3: Demographic Characteristics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-age-distribution">Step 4: Age Distribution</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-5-clinical-outcomes">Step 5: Clinical Outcomes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-6-follow-up-and-bmi">Step 6: Follow-Up and BMI</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-7-analysis">Step 7: Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-8-data-labeling-and-export">Step 8: Data Labeling and Export</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practical-application-and-analysis">Practical Application and Analysis</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise">Exercise:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="philosophy-overview-commands-syntax">
<h1>1. Philosophy, overview, commands, syntax<a class="headerlink" href="#philosophy-overview-commands-syntax" title="Permalink to this heading">#</a></h1>
<section id="entry-poll">
<h2>1.0 Entry poll<a class="headerlink" href="#entry-poll" title="Permalink to this heading">#</a></h2>
<p>Please respond to the brief <code class="docutils literal notranslate"><span class="pre">entry</span> <span class="pre">survey</span></code> that helps us better understand what your needs might be in week one. I’ll launch it on <a class="reference external" href="https://jhjhm.zoom.us/j/98481767907">zoom</a> for both the in-person and virtual attendees. The questions are listed here for your convenience. An identical <code class="docutils literal notranslate"><span class="pre">exit</span> <span class="pre">survey</span></code> will be launched in week-five to get a sense of what we’ve achieved over a five-week period. Our goal is to “titrate” the challenges we present to you each week against your skill-level, to ensure a smooth process of <a class="reference external" href="https://jhufena.github.io/home/preface.html">growth</a> (a.k.a, <a class="reference external" href="https://en.wikipedia.org/wiki/Relaxation_(psychology)">flow)</a> over the next eight weeks.</p>
<section id="survey">
<h3>1.0.1 Survey<a class="headerlink" href="#survey" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>How will you use Stata from 04/01/2024-05/17/2024?</p>
<ul class="simple">
<li><p>Locally on my laptop</p></li>
<li><p>Remotely on another desktop or terminal</p></li>
</ul>
</li>
<li><p>What operating system will you use locally or remotely?</p>
<ul class="simple">
<li><p>MacOSX</p></li>
<li><p>Unix</p></li>
<li><p>Windows</p></li>
</ul>
</li>
<li><p>Do you have any experience using Stata, SAS, R, Python, or any other statistical software?</p>
<ol class="arabic simple" start="0">
<li><p><strong>No Experience.</strong> I have no prior experience with Stata and am unfamiliar with the software. Also, I have no experience with other statistical software such as SAS, R, Python, etc.</p></li>
<li><p><strong>Basic Knowledge.</strong> I have a general understanding of basic commands but I require asistance to perform tasks.</p></li>
<li><p><strong>Novice User.</strong> I am familiar with basic commands and can import data and do basic data cleaning. But I require guidance for more complex analyses.</p></li>
<li><p><strong>Competent User.</strong> I am proficient in using Stata, SAS, R, Python, etc. for data exploration, descriptive statistics, basic inference (t-tests, chi-square tests), and regression</p></li>
<li><p><strong>Advanced User.</strong> I can do multivariable regression and understand various statistical modeling options and techniques available in Stata, SAS, R, etc.</p></li>
<li><p><strong>Expert User.</strong> I can write custom programs, macros, ado-files in Stata. Or I am an expert user of SAS, R, Python, etc. but have little to no experience with Stata.</p></li>
</ol>
</li>
</ol>
</section>
<section id="results">
<h3>1.0.2 Results<a class="headerlink" href="#results" title="Permalink to this heading">#</a></h3>
<p>Results of entry poll are <a class="reference external" href="https://raw.githubusercontent.com/jhustata/intermediate/main/entry_poll.csv">here</a>. And a detailed Stata analysis of these results can be found <a class="reference internal" href="entry_poll.html"><span class="doc std std-doc">here</span></a></p>
<section id="from-a-simulation">
<h4>From a simulation<a class="headerlink" href="#from-a-simulation" title="Permalink to this heading">#</a></h4>
<p>I planned the first two sessions of this class based on assumptions about your skill levels. One doesn’t always have the luxury of real data. But decisions must be made.</p>
<div class="cell tag_hide-input tag_hide-output docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># House cleaning</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># Adjust the height of bars here</span>
<span class="n">bar_height</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1">#</span>
<span class="c1"># Set the random seed for reproducibility</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Simulate responses for question 1 (Stata usage location)</span>
<span class="n">q1_responses</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;Locally on my laptop&#39;</span><span class="p">,</span> <span class="s1">&#39;Remote computer&#39;</span><span class="p">],</span> <span class="mi">100</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>

<span class="c1"># Simulate responses for question 2 (Operating system)</span>
<span class="n">q2_responses</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;MacOSX&#39;</span><span class="p">,</span> <span class="s1">&#39;Unix&#39;</span><span class="p">,</span> <span class="s1">&#39;Windows&#39;</span><span class="p">],</span> <span class="mi">100</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.67</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.32</span><span class="p">])</span>

<span class="c1"># Simulate responses for question 3 (Experience level)</span>
<span class="c1"># Assuming a mean experience level of 2 (Novice User) with a standard deviation of 1</span>
<span class="n">q3_responses</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="c1"># Ensure the experience level is within the 0 to 5 range and round to the nearest integer</span>
<span class="n">q3_responses</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">q3_responses</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># Question 1</span>
<span class="n">q1_values</span><span class="p">,</span> <span class="n">q1_counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">q1_responses</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">q1_values</span><span class="p">,</span> <span class="n">q1_counts</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">bar_height</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Question 1 Responses&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># Number of Responses</span>

<span class="c1"># Question 2</span>
<span class="n">q2_values</span><span class="p">,</span> <span class="n">q2_counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">q2_responses</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">q2_values</span><span class="p">,</span> <span class="n">q2_counts</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">bar_height</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Question 2 Responses&#39;</span><span class="p">)</span>

<span class="c1"># Question 3</span>
<span class="n">q3_values</span><span class="p">,</span> <span class="n">q3_counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">q3_responses</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">q3_values</span><span class="p">,</span> <span class="n">q3_counts</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">bar_height</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Question 3 Responses&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># Experience Level</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="s1">&#39;No Experience&#39;</span><span class="p">,</span> <span class="s1">&#39;Basic Knowledge&#39;</span><span class="p">,</span> <span class="s1">&#39;Novice User&#39;</span><span class="p">,</span> <span class="s1">&#39;Competent User&#39;</span><span class="p">,</span> <span class="s1">&#39;Advanced User&#39;</span><span class="p">,</span> <span class="s1">&#39;Expert User&#39;</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="_images/ce0771be92977d5297fd1ae75a3be8d6719b0281e1ee84ec704965dbe15e4be0.png" src="_images/ce0771be92977d5297fd1ae75a3be8d6719b0281e1ee84ec704965dbe15e4be0.png" />
</div>
</details>
</div>
</section>
<section id="from-zoom-poll">
<h4>From zoom Poll<a class="headerlink" href="#from-zoom-poll" title="Permalink to this heading">#</a></h4>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">display</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="c1"># Load the CSV file to examine its structure</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/jhustata/intermediate/main/entry_poll.csv&#39;</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="s1">&#39;~/documents/github/statatwo/entry_poll.csv&#39;</span>
<span class="n">survey_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>

<span class="c1"># Data processing for visualization</span>

<span class="c1"># Question 1: Stata usage location</span>
<span class="n">q1_data</span> <span class="o">=</span> <span class="n">survey_data</span><span class="p">[</span><span class="s1">&#39;How will you use Stata from 03/26/2024-05/17/2024?&#39;</span><span class="p">]</span>
<span class="n">q1_counts</span> <span class="o">=</span> <span class="n">q1_data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="c1"># Question 2: Operating system usage, handling multiple selections</span>
<span class="c1"># Splitting the responses on &#39;;&#39; and flattening the list</span>
<span class="n">q2_data_split</span> <span class="o">=</span> <span class="n">survey_data</span><span class="p">[</span><span class="s1">&#39;What operating system will you use locally or remotely?&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
<span class="n">q2_counts</span> <span class="o">=</span> <span class="n">q2_data_split</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="c1"># Question 3: Experience level, translating text responses into numeric levels</span>
<span class="n">experience_mapping</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;No Experience.&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;Basic Knowledge.&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;Novice User.&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;Competent User.&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;Advanced User.&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s1">&#39;Expert User.&#39;</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}</span>

<span class="c1"># Extract the first part of each response to map to the numeric values</span>
<span class="n">q3_data_mapped</span> <span class="o">=</span> <span class="n">survey_data</span><span class="p">[</span><span class="s1">&#39;Do you have any experience using Stata, SAS, R, Python, or any other statistical software?&#39;</span><span class="p">]</span>\
                    <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span>
<span class="n">q3_data_numeric</span> <span class="o">=</span> <span class="n">q3_data_mapped</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">experience_mapping</span><span class="p">)</span>
<span class="n">q3_counts</span> <span class="o">=</span> <span class="n">q3_data_numeric</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

<span class="c1"># Visualization</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="n">bar_height</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1"># Question 1</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">q1_counts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">q1_counts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">bar_height</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Question 1 Responses: Stata Usage Location&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Number of Responses&#39;</span><span class="p">)</span>

<span class="c1"># Question 2</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">q2_counts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">q2_counts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">bar_height</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Question 2 Responses: Operating System Used&#39;</span><span class="p">)</span>

<span class="c1"># Question 3</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">q3_counts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">q3_counts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">bar_height</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Question 3 Responses: Experience Level&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Number of Responses&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="s1">&#39;No Experience&#39;</span><span class="p">,</span> <span class="s1">&#39;Basic Knowledge&#39;</span><span class="p">,</span> <span class="s1">&#39;Novice User&#39;</span><span class="p">,</span> <span class="s1">&#39;Competent User&#39;</span><span class="p">,</span> <span class="s1">&#39;Advanced User&#39;</span><span class="p">,</span> <span class="s1">&#39;Expert User&#39;</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="c1"># Instead of plt.show(), save the plot to a BytesIO object and display it inline</span>
<span class="n">buf</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">buf</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">buf</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()))</span>

<span class="c1"># It&#39;s important to close the plt object to free up memory</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/sx/fd6zgj191mx45hspzbgwzlnr0000gn/T/ipykernel_84465/2795346893.py:59: UserWarning: Glyph 13 (
) missing from current font.
  plt.tight_layout()
/var/folders/sx/fd6zgj191mx45hspzbgwzlnr0000gn/T/ipykernel_84465/2795346893.py:63: UserWarning: Glyph 13 (
) missing from current font.
  plt.savefig(buf, format=&#39;png&#39;, bbox_inches=&#39;tight&#39;)
</pre></div>
</div>
<img alt="_images/b587dc2e5d2c2d3502223949acf14694b48cca6027002db7976f64a70d6bde36.png" src="_images/b587dc2e5d2c2d3502223949acf14694b48cca6027002db7976f64a70d6bde36.png" />
</div>
</div>
<details>
   <summary><b>GPT-4 Assisted Analysis</b></summary>
<p>GPT-4 produced this analysis in less than a minute. It’s virtually impossible for you to replicate that speed and accuracy, as we’ll see <a class="reference internal" href="entry_poll.html"><span class="doc std std-doc">shortly</span></a></p>
   <iframe width="560" height="315" src="https://www.youtube.com/embed/pi6aJnoT8dM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</details>
</section>
</section>
<section id="understanding-format-specifiers-9s">
<h3>1.0.3 Understanding Format Specifiers: <code class="docutils literal notranslate"><span class="pre">%9s</span></code><a class="headerlink" href="#understanding-format-specifiers-9s" title="Permalink to this heading">#</a></h3>
<p>To seamlessly integrate external data into our analysis, let’s start by importing a .csv file directly into Stata. Pay close attention to the variable types discussed in the following section: <a class="reference external" href="https://jhustata.github.io/basic/chapter1.html#variable-types">Understanding Variable Types</a>.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span>import delimited <span class="s">&quot;https://raw.githubusercontent.com/jhustata/intermediate/main/entry_poll.csv&quot;</span>,<span class="k"> clear</span> 
</pre></div>
</div>
<ul class="simple">
<li><p>For a comprehensive guide on this command, type <code class="docutils literal notranslate"><span class="pre">help</span> <span class="pre">import</span> <span class="pre">delimited</span></code>.</p></li>
<li><p>Within <em>import_delimited_options</em>, focus on the “<u>varn</u>ames” option.</p></li>
<li><p>Consider this: if the first row of your dataset includes variable names, how should you proceed?</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span>import delimited <span class="s">&quot;https://raw.githubusercontent.com/jhustata/basic/main/entry_poll.csv&quot;</span>,<span class="k"> clear</span> varn(<span class="m">1</span>)
</pre></div>
</div>
<p>For those navigating Stata’s syntax for the first time, remember that any argument following a comma is known as an <code class="docutils literal notranslate"><span class="pre">option</span></code>. This grants considerable flexibility in data importation, analysis, and output generation. As you develop your programming skills, you’ll learn to offer similar flexibility to your users by incorporating customizable options into your scripts.</p>
<p>Can you challenge yourself to create a bar graph with the imported data? Data can be numeric or string – how do we determine the nature of our dataset?</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">describe</span>
</pre></div>
</div>
<p>Identify the format of your variables. Need a hint? Revisit the section <a class="reference external" href="https://jhustata.github.io/intermediate/chapter1.html#variable-types">1.2 Overview</a>.</p>
<p>For a thorough analysis using Stata on this dataset, refer to <a class="reference internal" href="entry_poll.html"><span class="doc std std-doc">this detailed examination</span></a>.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;1. Root&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2500</span><span class="p">,</span> <span class="mi">700</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;2. Pentatonic&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">4200</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;3. Diatonic&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2500</span><span class="p">,</span> <span class="o">-</span><span class="mi">700</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;4. Chromatic&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;5. Temperament&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;6. Expression&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">4000</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;1. Root&quot;</span><span class="p">,</span> <span class="s2">&quot;4. Chromatic&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;2. Pentatonic&quot;</span><span class="p">,</span> <span class="s2">&quot;4. Chromatic&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;3. Diatonic&quot;</span><span class="p">,</span> <span class="s2">&quot;4. Chromatic&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;4. Chromatic&quot;</span><span class="p">,</span> <span class="s2">&quot;5. Temperament&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;5. Temperament&quot;</span><span class="p">,</span> <span class="s2">&quot;6. Expression&quot;</span><span class="p">)])</span>

<span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">)</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;4. Chromatic&quot;</span><span class="p">:</span> <span class="s2">&quot;4. Agency&quot;</span><span class="p">,</span>
          <span class="s2">&quot;1. Root&quot;</span><span class="p">:</span> <span class="s2">&quot;1. Tools&quot;</span><span class="p">,</span>
          <span class="s2">&quot;2. Pentatonic&quot;</span><span class="p">:</span> <span class="s2">&quot;2. Challenges&quot;</span><span class="p">,</span>
          <span class="s2">&quot;3. Diatonic&quot;</span><span class="p">:</span> <span class="s2">&quot;3. Skills&quot;</span><span class="p">,</span>
          <span class="s2">&quot;5. Temperament&quot;</span><span class="p">:</span> <span class="s2">&quot;5. Flow&quot;</span><span class="p">,</span>
          <span class="s2">&quot;6. Expression&quot;</span><span class="p">:</span> <span class="s2">&quot;6. Growth&quot;</span><span class="p">}</span>  <span class="c1"># Added label for &quot;NDI&quot; node in the labels dictionary</span>

<span class="c1"># Update color for the &quot;Scenarios&quot; node</span>
<span class="n">node_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lavender&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">]</span>
<span class="c1"># node_colors = [&quot;lightblue&quot;,&quot;lavender&quot;, &quot;lavender&quot;, &quot;lightgreen&quot;, &quot;lightpink&quot;, &quot;lightpink&quot;]</span>
<span class="c1"># Suppress the deprecation warning</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">20000</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_labels</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span> <span class="c1"># , font_weight=&#39;bold&#39;</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="_images/931e5210b5af8aebf9a0ddf56abccf41d6a44d371877c6f1d6db6a58d81cef4d.png" src="_images/931e5210b5af8aebf9a0ddf56abccf41d6a44d371877c6f1d6db6a58d81cef4d.png" />
</div>
</div>
</section>
</section>
<section id="philosophy">
<h2>1.1 Philosophy<a class="headerlink" href="#philosophy" title="Permalink to this heading">#</a></h2>
<p>Diving into Stata for data analysis and statistical programming, we embrace a philosophy that’s rooted in practicality and deep contemplation.</p>
<ol class="arabic simple">
<li><p>Tools</p>
<ul class="simple">
<li><p>Workstation</p>
<ul>
<li><p>Remote Access: Utilize Terminal or <a class="reference external" href="https://ictr.johnshopkins.edu/service/informatics/safe-desktop/">Safe Desktop</a> for secure, remote operations.</p></li>
<li><p>Local Setup: <a class="reference external" href="https://download.stata.com/download/">Download Stata</a> directly onto your personal computer.</p></li>
</ul>
</li>
<li><p>Installation</p>
<ul>
<li><p>Visit <a class="reference external" href="http://download.stata.com">download.stata.com</a> for the setup files.</p></li>
<li><p>Username: 0123456789 (as provided in your email) – remember, it’s reusable for future Stata acquisitions.</p></li>
<li><p>Password: Create a secure one of your choosing (<code class="docutils literal notranslate"><span class="pre">$3(re+</span></code> as an example).</p></li>
<li><p>Serial number: Provided with your purchase, which could be for:</p>
<ul>
<li><p>A perpetual license (higher cost)</p></li>
<li><p>A time-limited subscription (6 or 12 months)</p></li>
</ul>
</li>
<li><p>Compatible Operating Systems: Windows, Mac, Linux (contact Stata for alternatives).</p></li>
<li><p>Choose Your Stata Package: Stata/MP, Stata/SE, Stata/BE, tailored to your needs like parallel processing support for Mac, including necessary files and documentation.</p></li>
<li><p>Ensure Stata can access your documents folder for seamless file management.</p></li>
</ul>
</li>
<li><p>Courses</p>
<ul>
<li><p><strong>340.600 Stata Programming I</strong> (Basics)</p></li>
<li><p><strong>340.700 Stata Programming II</strong> (Intermediate Level)</p></li>
<li><p><strong>340.800 Stata Programming III</strong> (Advanced Mastery)</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Challenges</p>
<ul class="simple">
<li><p><a class="reference external" href="https://jhufena.github.io/home/intro.html">Foundational</a> Steps:</p>
<ul>
<li><p>Introductory courses like Epi 750 series and Biostats 140 series.</p></li>
</ul>
</li>
<li><p>Hopkins-Specific:</p>
<ul>
<li><p>Engage with <a class="reference external" href="https://jhustata.github.io/basic/quickrefs.html#labs-schedule">Labs/Practice</a>, homework, capstones/theses, and course Biostats 140.624 for hands-on learning.</p></li>
</ul>
</li>
<li><p>Real-World Applications:</p>
<ul>
<li><p>Analyze data from <a class="reference external" href="https://wwwn.cdc.gov/nchs/nhanes/Default.aspx">NHANES</a> covering demographics, health questionnaires, nutrition, and more for practical insights into public health.</p></li>
<li><p>Work with national databases, clinical studies, and longitudinal cohorts for a broad exposure to data analysis.</p></li>
</ul>
</li>
<li><p>Simulation for Skill Building:</p>
<ul>
<li><p>Experiment with creating <a class="reference external" href="https://jhufena.github.io/home/act0/act_0_7/act_0_0_7_12.html">Data</a> that mimics real databases to refine your Stata scripts.</p></li>
<li><p>Develop skills in randomization, handling missing data, bootstrapping, understanding cryptography/disclosure risks, calculating sample sizes, and more for versatile analytical capabilities.</p></li>
<li><p>Engage in adversarial training and use simulations for didactic purposes across various scenarios.</p></li>
</ul>
</li>
</ul>
</li>
</ol>
<p>This structured approach not only builds foundational skills but also prepares you to tackle real-world challenges with confidence and creativity.</p>
<section id="know-be-reverent">
<h3>1.1.2 Know &amp; be Reverent<a class="headerlink" href="#know-be-reverent" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple" start="3">
<li><p><strong>Skills</strong></p>
<ul class="simple">
<li><p><strong>Analytical Thinking:</strong> You are encouraged to not just learn Stata syntax but to understand the data you are working with. Stata is not just a tool but a gateway to meaningful insights. This class assumes that you have received some training in epidemiology and biostatistics and will not be emphasizing any of these points.</p></li>
<li><p><strong>Data Management Mastery:</strong> Knowing how to efficiently clean, manipulate, and prepare data is sacred in the realm of statistical analysis. Treat each <a class="reference external" href="https://jhustata.github.io/basic/quickrefs.html#datasets-and-supplementary-materials">dataset as a unique puzzle</a> that tells a story. I’ve two datasets that have the same information, but in different formats. From a technical perspective, there might be nuanced differences in the challenges you’ll encounter while using one dataset compared with another.</p>
<ul>
<li><p><a class="reference external" href="https://raw.githubusercontent.com/jhustata/livre/main/transplants.txt">transplants.txt</a></p></li>
<li><p><a class="reference external" href="https://jhustata.github.io/basic/_downloads/34a8255f06036b44354b3c36c5583d7e/transplants.dta">transplants.dta</a></p></li>
</ul>
</li>
<li><p><strong>Statistical Techniques:</strong> A reverent understanding of the statistical methods behind the commands is crucial but beyond the scope of this class. For instance, we will not discuss the relative merits of three approaches to survival analysis: non-parametric, semi-parametric, and parametric. This class assumes you know why and when to use each method. But we will provide you with the tools to do so efficiently.</p></li>
</ul>
</li>
<li><p><strong>Agency</strong></p>
<ul class="simple">
<li><p><strong>Self-directed Learning:</strong> We hope you appreciate the value of exploration beyond the classroom. The most profound learning occurs through tackling real-world data challenges.</p></li>
<li><p><strong>Community Contribution:</strong> Please engage with our new <a class="reference external" href="https://github.com/jhufena/discussions/discussions">Stata-focused community</a>, share knowledge, ask questions, and contribute solutions. Respect for the community’s collective wisdom and the software’s capabilities should guide your interactions.</p></li>
</ul>
</li>
</ol>
</section>
<section id="do-on-time">
<h3>1.1.3 Do &amp; on Time<a class="headerlink" href="#do-on-time" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple" start="5">
<li><p><strong>Flow</strong></p>
<ul class="simple">
<li><p><strong>Start with the Basics:</strong> <a class="reference external" href="https://publichealth.jhu.edu/course/38901">This class</a>, as it’s name suggests, emphasizes the importance of a strong foundation. Understanding the <code class="docutils literal notranslate"><span class="pre">basics</span></code> thoroughly ensures smoother progression to <code class="docutils literal notranslate"><span class="pre">intermediate</span></code> and <code class="docutils literal notranslate"><span class="pre">advanced</span></code> topics.</p></li>
<li><p><strong>Practical Applications:</strong> If you need a real-world dataset (e.g. NHANES) for your Biostats 140.624 project, we’d be happy to facilitate you and help curate it for you. Hopefully this will foster a deeper understanding and appreciation of Stata’s power.</p></li>
<li><p><strong>Iterative Learning:</strong> Please use an iterative approach to all your labs and homeworks. The first attempt doesn’t have to be perfect; learning comes from refinement and persistence.</p></li>
</ul>
</li>
<li><p><strong>Growth</strong></p>
<ul class="simple">
<li><p><strong>Feedback Loops:</strong> Constructive feedback is sacred. So we are offering an <a class="reference external" href="https://github.com/jhufena/discussions/discussions">open environment</a> where feedback is given and received, to promote continuous improvement and learning.</p></li>
<li><p><strong>Skill Expansion:</strong> The course is structured to progressively challenge you with more complex problems and datasets. Growth in the realm of Stata Programming, and in any aspect of life in general, is about matching challenges with skills. But gradually and systematically increasing the challenges we present to you, and by offering you prompt feedback on your performance, we believe we’ll nurture an environemnt that ensures growth in your skills.</p></li>
<li><p><strong>Lifelong Learning:</strong> And remember that learning Stata, like any other skill, is a journey without an end. The landscape of data analysis is always evolving, and so should your skills and understanding. This is partly what motivated our new <a class="reference external" href="https://github.com/jhufena/discussions/discussions">Stata-focused community</a> as well as our <a class="reference external" href="https://jhufena.github.io/home/intro.html">general analytic community</a> that aims to discuss topics at the interface of Stata, R, Python, AI, code, version control, automation, open science, etc.</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="overview">
<h2>1.2 Overview 🦀<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p><em>Ceci n’est pas une crabe</em></p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1">#import numpy as np</span>
<span class="c1">#import sklearn as skl</span>
<span class="c1"># </span>

<span class="c1">#plt.figure(figsize=[2, 2])</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>  <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">550</span><span class="p">,</span><span class="mi">500</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span>  <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">550</span><span class="p">,</span><span class="mi">500</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;program&quot;</span><span class="p">,</span>  <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">960</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;syntax&quot;</span><span class="p">,</span>  <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">950</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;ado&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">550</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;do&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">550</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1900</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;queue&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1900</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;dta&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">475</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1900</span><span class="p">,</span> <span class="o">-</span><span class="mi">475</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;excel&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">4000</span><span class="p">,</span> <span class="o">-</span><span class="mi">475</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;word&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1900</span><span class="p">,</span> <span class="o">-</span><span class="mi">475</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;html&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4000</span><span class="p">,</span> <span class="o">-</span><span class="mi">475</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;publish&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">950</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([</span> <span class="p">(</span><span class="s2">&quot;program&quot;</span><span class="p">,</span><span class="s2">&quot;ado&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;syntax&quot;</span><span class="p">,</span> <span class="s2">&quot;do&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;ado&quot;</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;do&quot;</span><span class="p">,</span> <span class="s2">&quot;queue&quot;</span><span class="p">)</span> <span class="p">])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;results&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;queue&quot;</span><span class="p">,</span> <span class="s2">&quot;results&quot;</span><span class="p">),(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span><span class="s2">&quot;excel&quot;</span><span class="p">),(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span><span class="s2">&quot;word&quot;</span><span class="p">),(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span><span class="s2">&quot;html&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span><span class="s2">&quot;dta&quot;</span><span class="p">),(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span><span class="s2">&quot;log&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;dta&quot;</span><span class="p">,</span><span class="s2">&quot;publish&quot;</span><span class="p">),(</span><span class="s2">&quot;log&quot;</span><span class="p">,</span><span class="s2">&quot;publish&quot;</span><span class="p">),(</span><span class="s2">&quot;excel&quot;</span><span class="p">,</span><span class="s2">&quot;publish&quot;</span><span class="p">),(</span><span class="s2">&quot;word&quot;</span><span class="p">,</span><span class="s2">&quot;publish&quot;</span><span class="p">),(</span><span class="s2">&quot;html&quot;</span><span class="p">,</span><span class="s2">&quot;publish&quot;</span><span class="p">)])</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> 
        <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">),</span> 
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
        <span class="n">font_weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> 
        <span class="n">node_size</span> <span class="o">=</span> <span class="mi">4500</span><span class="p">,</span>
        <span class="n">node_color</span> <span class="o">=</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">,</span>
        <span class="n">linewidths</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s2">&quot;#000000&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="_images/68b0bc74161d7710f53566e5ee9be406db910130ddbc8f918781f1977ed8e80e.png" src="_images/68b0bc74161d7710f53566e5ee9be406db910130ddbc8f918781f1977ed8e80e.png" />
</div>
</div>
<p>We are going to distinguish between two fundamental perspectives in this class:</p>
<ul class="simple">
<li><p>System</p>
<ul>
<li><p>Native (built-in stata application, support files, <code class="docutils literal notranslate"><span class="pre">.ado</span></code> files)</p>
<ul>
<li><p>If you type <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">help</span></code> into your command window you get something like: <code class="docutils literal notranslate"><span class="pre">/Applications/Stata/ado/base/h/help.ado</span></code></p></li>
</ul>
</li>
<li><p>Third-party (typically <code class="docutils literal notranslate"><span class="pre">.ado</span></code> files)</p>
<ul>
<li><p>When I type <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">table1_fena</span></code> I get <code class="docutils literal notranslate"><span class="pre">/Applications/Stata/ado/base/t/table1_fena.ado</span></code></p></li>
</ul>
</li>
<li><p>Your <code class="docutils literal notranslate"><span class="pre">.ado</span></code> files (you’ll learn to write &amp; install your own programs)</p>
<ul>
<li><p>Since you don’t have <code class="docutils literal notranslate"><span class="pre">table1_fena.ado</span></code> installed you’ll get <code class="docutils literal notranslate"><span class="pre">command</span> <span class="pre">table1_fena</span> <span class="pre">not</span> <span class="pre">found</span> <span class="pre">as</span> <span class="pre">either</span> <span class="pre">built-in</span> <span class="pre">or</span> <span class="pre">ado-file</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>User</p>
<ul>
<li><p>Known</p>
<ul>
<li><p>Instructor</p></li>
<li><p>Teaching assistants</p></li>
<li><p>Students</p></li>
<li><p>Collaborators</p></li>
</ul>
</li>
<li><p>Unknown</p>
<ul>
<li><p>Anticipate (emphathize with different kinds of users)</p></li>
<li><p>Share code (on GitHub, for instance)</p></li>
<li><p>Care (user-friendly, annotated code)</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">system</span></code> is the <u>Stata application</u> and its a simple noun. It is not <strike>STATA</strike>, which gives the impression of being an acronym. I presume you’ve all installed Stata onto your local machines. If not I presume you’ll be doing so very soon or you will be remotely accessing it. The <code class="docutils literal notranslate"><span class="pre">user</span></code> includes you, me, the teaching assistants, collaborators, or strangers.</p>
<p>As a user, you will or have already downloaded and installed a system of programs, mostly ado-files, which form the foundation of all the commands you will be using in Stata. These are the <strong>native</strong> Stata system files.</p>
<p>But soon you will begin to write your own Stata programs or <code class="docutils literal notranslate"><span class="pre">.ado</span></code> files and install them into the system folders (as I’ve done with <code class="docutils literal notranslate"><span class="pre">table1_fena.ado</span></code>). Then, it will be helpful to think of your role as part of the system. In your new role as system, it will be helpful to anticipate the needs of the known and unknown future users of your program. This will call for <strong>empathy</strong> (anticipating user needs), <strong>sharing</strong> (your code with others), and <strong>caring</strong> (that its user-friendly).</p>
<ul class="simple">
<li><p>Installation</p>
<ul>
<li><p>Local</p>
<ul>
<li><p>MacOSX</p></li>
<li><p>Unix</p></li>
<li><p>Windows</p></li>
</ul>
</li>
<li><p>Remote</p>
<ul>
<li><p>Desktop</p>
<ul>
<li><p>Windows</p></li>
</ul>
</li>
<li><p>Cluster</p>
<ul>
<li><p>Unix/Terminal</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Local</p>
<ul>
<li><p><a class="reference external" href="https://www.stata.com/manuals13/gsw2.pdf#gsw2TheStatauserinterface">Menu</a></p>
<ul>
<li><p>file</p></li>
<li><p>edit</p></li>
<li><p>view</p></li>
<li><p>data</p></li>
<li><p>graphics</p></li>
<li><p>statistics</p></li>
<li><p>user</p></li>
<li><p>window</p>
<ul>
<li><p>command ⌘ 1</p></li>
<li><p>results ⌘ 2</p></li>
<li><p>history ⌘ 3</p></li>
<li><p>variables ⌘ 4</p></li>
<li><p>properties ⌘ 5</p></li>
<li><p>graph ⌘ 6</p></li>
<li><p>viewer ⌘ 7</p></li>
<li><p>editor ⌘ 8</p></li>
<li><p>do-file ⌘ 9</p></li>
<li><p>manager ⌘ 10</p></li>
</ul>
</li>
<li><p>help</p></li>
</ul>
</li>
<li><p>Command</p>
<ul>
<li><p>The very first <code class="docutils literal notranslate"><span class="pre">valid</span></code> word you type into the command window or on a line of code in a do file</p>
<ul>
<li><p>Some <a class="reference external" href="https://www.stata.com/manuals13/u27.pdf">basic</a> commands that the folks at Stata think you ought to know by the end of this class. Please keep checking</p></li>
<li><p>In your week 1 <a class="reference external" href="https://jhustata.github.io/basic/chapter1.html#homework">homework</a> you’ll learn to use the <code class="docutils literal notranslate"><span class="pre">display</span></code> command</p></li>
</ul>
</li>
<li><p>Rendered blue in color if its a <u>native</u> Stata command (on my machine)</p></li>
<li><p>A <u>third-party</u> program/command appears white and may not work if you share your do file with others</p></li>
<li><p>Your collaborators, TAs, and instructors must be warned about the need to first install such third-party programs</p></li>
</ul>
</li>
<li><p>Syntax</p>
<ul>
<li><p>The arrangement of words after a Stata command</p></li>
<li><p>Create well-formed instructions in Stata (i.e., the syntax of Stata)</p></li>
<li><p>Other terms or synonyms include code, Stata code, code snippet.</p></li>
</ul>
</li>
<li><p>Input</p>
<ul>
<li><p>Menu (<strong>see above:</strong> a menu-driven task outputs command and syntax in the results window)</p></li>
<li><p>do files (Stata script with a sequence of commands; you can copy &amp; paste some from the results window)</p></li>
<li><p>ado files (Stata script with a program or a series of programs for specific or general tasks)</p></li>
</ul>
</li>
<li><p>Output/Results</p>
<ul>
<li><p>String</p>
<ul>
<li><p>text (e.g., <code class="docutils literal notranslate"><span class="pre">str49</span></code> below = string of 49 characters <u>including spaces</u>)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">median</span> <span class="pre">age</span> <span class="pre">in</span> <span class="pre">this</span> <span class="pre">population</span> <span class="pre">is</span> <span class="pre">40</span> <span class="pre">years</span> <span class="pre">old</span></code></p></li>
</ul>
</li>
<li><p>url</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">https://www.stata-press.com/data/r8</span></code></p></li>
</ul>
</li>
<li><p>filepath</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/users/d/desktop</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Numeric (types by range)</p>
<ul>
<li><p>integer</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">byte</span></code>: <span class="math notranslate nohighlight">\(-127\)</span> to <span class="math notranslate nohighlight">\(100\)</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span></code>: <span class="math notranslate nohighlight">\(-32767\)</span> to <span class="math notranslate nohighlight">\(32740\)</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">long</span></code>: <span class="math notranslate nohighlight">\(\pm   2\)</span> billion</p></li>
</ul>
</li>
<li><p>decimal</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">float</span></code>: <span class="math notranslate nohighlight">\(\pm   10^{38}\)</span> billion</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">double</span></code>: <span class="math notranslate nohighlight">\(\pm   10^{307}\)</span> billion</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1">#plt.figure(figsize=[2, 2])</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">960</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1900</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">3000</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">)</span> <span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;long&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="o">-</span><span class="mi">960</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1400</span><span class="p">,</span> <span class="o">-</span><span class="mi">960</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;byte&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">3500</span><span class="p">,</span> <span class="o">-</span><span class="mi">960</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;float&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2400</span><span class="p">,</span> <span class="o">-</span><span class="mi">960</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4500</span><span class="p">,</span> <span class="o">-</span><span class="mi">960</span><span class="p">))</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([</span> <span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span><span class="s2">&quot;string&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">),(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">)</span> <span class="p">,(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;filepath&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span><span class="s2">&quot;byte&quot;</span><span class="p">),(</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span><span class="s2">&quot;float&quot;</span><span class="p">),(</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span><span class="s2">&quot;double&quot;</span><span class="p">),(</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span><span class="s2">&quot;int&quot;</span><span class="p">)])</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span><span class="s2">&quot;long&quot;</span><span class="p">),(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span><span class="s2">&quot;numeric&quot;</span><span class="p">)])</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> 
        <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">),</span> 
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
        <span class="n">font_weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> 
        <span class="n">node_size</span> <span class="o">=</span> <span class="mi">4500</span><span class="p">,</span>
        <span class="n">node_color</span> <span class="o">=</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">,</span>
        <span class="n">linewidths</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s2">&quot;#000000&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="_images/ba7a03497dffd11a80dc73ed024fddf10be1efa8e096461c7e513dcd71bdaf71.png" src="_images/ba7a03497dffd11a80dc73ed024fddf10be1efa8e096461c7e513dcd71bdaf71.png" />
</div>
</div>
<ul class="simple">
<li><p>Embed</p>
<ul>
<li><p>Results window</p></li>
<li><p>Graph</p></li>
<li><p>File: excel, log, dta, word, <a class="reference internal" href="dyndoc.html"><span class="doc std std-doc">html</span></a>, etc.</p></li>
</ul>
</li>
<li><p>Publish/<a class="reference external" href="https://en.wikipedia.org/wiki/Markup_language">Markup</a></p>
<ul>
<li><p>Self (e.g., GitHub)</p></li>
<li><p>Journal (e.g. JAMA)</p></li>
<li><p>Commercial (e.g. Pfizer Ad)</p></li>
</ul>
</li>
</ul>
<p>Let’s use a simple example to illustrate some of the terms we’ve introduced:</p>
<ul class="simple">
<li><p>Menu</p>
<ul>
<li><p>file &gt; example datasets &gt; lifeexp.dta &gt; use</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sysuse</span> <span class="pre">lifeexp.dta</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">webuse</span> <span class="pre">lifeexp.dta</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">https://www.stata-press.com/data/r8/lifeexp.dta</span></code></p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>do file</p>
<ul>
<li><p>Importing data</p></li>
<li><p>Exploring data</p></li>
<li><p>Analyzing data</p></li>
<li><p>Outputing results</p></li>
</ul>
</li>
<li><p>ado file</p>
<ul>
<li><p>basis of Stata commands</p></li>
</ul>
</li>
<li><p>etc.</p></li>
</ul>
</section>
<section id="simulation">
<h2>1.3 Simulation<a class="headerlink" href="#simulation" title="Permalink to this heading">#</a></h2>
<p>In anticipation of collecting or securing data that might be central to a project, a sophisticated analyst may experiment with creating Data that mimic these real databases to refine your Stata scripts.</p>
<p>We’ll walk through a simple simulation to whet your appetite and lay a foundation for many of our other goals.</p>
<p>Let’s take an example from the following Stata script:</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">qui</span> {
<span class="k">	clear</span> 
	cls
<span class="k">	if</span> <span class="nf">c</span>(N) { <span class="c1">//background</span>
		inspired<span class="k"> by</span> polack et al. nejm <span class="m">2020</span>
		NEJM2020;<span class="m">383</span>:<span class="m">2603-15</span>
		lets<span class="k"> do</span> some reverse engineering
		aka<span class="k"> simulate</span>,<span class="k"> generate</span> data 
		from results: reversed process<span class="o">!!</span>
	}
<span class="k">	if</span> <span class="nf">c</span>(os)<span class="o">==</span><span class="s">&quot;Windows&quot;</span> { <span class="c1">//methods</span>
	    lobal workdir <span class="s">&quot;</span><span class="nv">`c(pwd)&#39;</span><span class="se">\&quot;</span>
	}
<span class="k">	else</span> {
<span class="k">	    global</span> workdir <span class="s">&quot;</span><span class="nv">`c(pwd)&#39;</span><span class="s">/&quot;</span>
	}
<span class="k">	capture log close</span>
<span class="k">	log</span> using <span class="vg">${workdir}</span>simulation<span class="m">.</span>log,<span class="k"> replace</span> 
<span class="k">	set</span> seed <span class="m">340600</span>
<span class="k">	set</span> obs <span class="m">37706</span>
	}
<span class="k">	if</span> <span class="nf">c</span>(N)<span class="o">==</span><span class="m">37706</span> { <span class="c1">//simulation </span>
	    #delimit ; 
		<span class="c1">//row1</span>
<span class="k">		g</span> bnt=<span class="nf">rbinomial</span>(<span class="m">1</span>,.<span class="m">5</span>);
<span class="k">		lab</span> define Bnt 
		    <span class="m">0</span> <span class="s">&quot;Placebo&quot;</span>  
	        <span class="m">1</span> <span class="s">&quot;BNT162b2&quot;</span> ;
<span class="k">		label</span> values bnt Bnt ;
<span class="k">		tab</span> bnt ; 
		<span class="c1">//row2</span>
<span class="k">		gen</span> female=<span class="nf">rbinomial</span>(<span class="m">1</span>, .<span class="m">494</span>); 
<span class="k">		label</span> define Female  
		    <span class="m">0</span> <span class="s">&quot;Male&quot;</span>  
			<span class="m">1</span> <span class="s">&quot;Female&quot;</span>; 
<span class="k">		label</span> values female Female; 
<span class="k">		tab</span> female;
		<span class="c1">//row3 </span>
<span class="k">		tempvar</span> dem ;
<span class="k">		gen</span> <span class="nv">`dem&#39;</span>=<span class="nf">round</span>(<span class="nf">runiform</span>(<span class="m">0</span>,<span class="m">100</span>),.<span class="m">1</span>); 
<span class="k">		recode</span> <span class="nv">`dem&#39;</span>  
		    (<span class="m">0</span><span class="o">/</span><span class="m">82.9</span>=<span class="m">0</span>)  
		    (<span class="m">83.0</span><span class="o">/</span><span class="m">92.1</span>=<span class="m">1</span>)  
		    (<span class="m">92.2</span><span class="o">/</span><span class="m">96.51</span>=<span class="m">2</span>)   
		    (<span class="m">96.52</span><span class="o">/</span><span class="m">97.0</span>=<span class="m">3</span>)  
		    (<span class="m">97.1</span><span class="o">/</span><span class="m">97.2</span>=<span class="m">4</span>)  
		    (<span class="m">97.3</span><span class="o">/</span><span class="m">99.41</span>=<span class="m">5</span>)  
		    (<span class="m">99.42</span><span class="o">/</span><span class="m">100</span>=<span class="m">6</span>)  
		         ,<span class="k"> gen</span>(race);
<span class="k">		lab</span> define Race  
			<span class="m">0</span> <span class="s">&quot;White&quot;</span>    
		    <span class="m">1</span> <span class="s">&quot;Black or African American&quot;</span> 
			<span class="m">2</span> <span class="s">&quot;Asian&quot;</span> 
			<span class="m">3</span> <span class="s">&quot;Native American or Alsak Native&quot;</span>  
			<span class="m">4</span> <span class="s">&quot;Native Hawaiian or other Pacific Islander&quot;</span>  
			<span class="m">5</span> <span class="s">&quot;Multiracial&quot;</span>  
			<span class="m">6</span> <span class="s">&quot;Not reported&quot;</span>; 
<span class="k">		label</span> values race Race; 
<span class="k">		tab</span> race;
		<span class="c1">//row4 </span>
<span class="k">		gen</span> ethnicity=<span class="nf">rbinomial</span>(<span class="m">1</span>,<span class="m">0.28</span>);
<span class="k">		tostring</span> ethnicity,<span class="k"> replace</span>;
<span class="k">		replace</span> ethnicity=<span class="s">&quot;Latinx&quot;</span><span class="k"> if</span> ethnicity<span class="o">==</span><span class="s">&quot;1&quot;</span>;
<span class="k">		replace</span> ethnicity=<span class="s">&quot;Other&quot;</span><span class="k"> if</span> ethnicity<span class="o">==</span><span class="s">&quot;0&quot;</span>;
		<span class="c1">//row5 </span>
<span class="k">		tempvar</span> country;
<span class="k">		gen</span> <span class="nv">`country&#39;</span>=<span class="nf">round</span>(<span class="nf">runiform</span>(<span class="m">0</span>,<span class="m">100</span>), .<span class="m">1</span>);
<span class="k">		recode</span> <span class="nv">`country&#39;</span>   
		    (<span class="m">0</span><span class="o">/</span><span class="m">15.3</span>=<span class="m">0</span>)  
			(<span class="m">15.4</span><span class="o">/</span><span class="m">21.5</span>=<span class="m">1</span>)  
			(<span class="m">21.6</span><span class="o">/</span><span class="m">23.6</span>=<span class="m">2</span>)  
			(<span class="m">23.7</span><span class="o">/</span><span class="m">100</span>=<span class="m">3</span>) 
			    ,<span class="k"> gen</span>(country) ;
<span class="k">		label</span> define Country 
			<span class="m">0</span> <span class="s">&quot;Argentina&quot;</span>  
		    <span class="m">1</span> <span class="s">&quot;Brazil&quot;</span>  
			<span class="m">2</span> <span class="s">&quot;South Africa&quot;</span>  
			<span class="m">3</span> <span class="s">&quot;United States&quot;</span>; 
<span class="k">		label</span> values country Country; 
<span class="k">		tab</span> country;
		<span class="c1">//row7 </span>
<span class="k">		gen</span> age=(<span class="nf">rt</span>(_N)<span class="o">*</span><span class="m">9.25</span>)<span class="o">+</span><span class="m">52</span> ; 
<span class="k">		replace</span> age=<span class="nf">runiform</span>(<span class="m">16</span>,<span class="m">91</span>)  
<span class="k">		    if</span> <span class="o">!</span><span class="nf">inrange</span>(age,<span class="m">16</span>,<span class="m">91</span>); 
<span class="k">		summ</span> age,<span class="k"> d</span> ;
<span class="k">		local</span> age_med=<span class="nf">r</span>(p50);<span class="k"> local</span> age_lb=<span class="nf">r</span>(min);<span class="k"> local</span> age_ub=<span class="nf">r</span>(max);
<span class="k">		gen</span> dob =<span class="k"> d</span>(27jul2020) <span class="o">-</span>  
		          (age<span class="o">*</span><span class="m">365.25</span>) ; 
<span class="k">		gen</span> dor = dob <span class="o">+</span> age<span class="o">*</span><span class="m">365.25</span> <span class="o">+</span> <span class="nf">runiform</span>(<span class="m">0</span>,<span class="m">4</span><span class="o">*</span><span class="m">30.25</span>); 
		<span class="c1">//row6 </span>
<span class="k">		gen</span> over55=age<span class="o">&gt;</span><span class="m">55</span> ;<span class="k"> tab</span> over55;
		<span class="c1">//row8 </span>
<span class="k">		gen</span> bmi=<span class="nf">rbinomial</span>(<span class="m">1</span>, .<span class="m">351</span>);<span class="k"> tab</span> bmi; 
		<span class="c1">//figure 3 </span>
<span class="k">		g</span> days=rweibull(.<span class="m">7</span>,<span class="m">17</span>,<span class="m">0</span>)<span class="k"> if</span> bnt<span class="o">==</span><span class="m">0</span> ;
<span class="k">		g</span> covid=<span class="nf">rbinomial</span>(<span class="m">1</span>, <span class="m">162</span><span class="o">/</span><span class="m">21728</span>)<span class="k"> if</span> bnt<span class="o">==</span><span class="m">0</span> ; 
<span class="k">		replace</span> days=rweibull(.<span class="m">4</span>,.<span class="m">8</span>,<span class="m">0</span>)<span class="k"> if</span> bnt<span class="o">==</span><span class="m">1</span> ;
<span class="k">		replace</span> covid=<span class="nf">rbinomial</span>(<span class="m">1</span>, <span class="m">14</span><span class="o">/</span><span class="m">21772</span>)<span class="k"> if</span> bnt<span class="o">==</span><span class="m">1</span>; 
		<span class="c1">//key dates </span>
<span class="k">		gen</span> eft = dor <span class="o">+</span> days;
		<span class="c1">//date formats</span>
<span class="k">		format</span> dob <span class="nx">%td;</span><span class="k"> format</span> dor <span class="nx">%td;</span><span class="k"> format</span> eft <span class="nx">%td;</span>
		 <span class="c1">//kaplan-meier curve</span>
<span class="k">		 stset</span> days, fail(covid) ;
<span class="k">		 sts graph</span>,  
<span class="k">		    by</span>(bnt)  
		    fail per(<span class="m">100</span>)  
		    tmax(<span class="m">119</span>)  
		    xlab(<span class="m">0</span>(<span class="m">7</span>)<span class="m">119</span>) 
		    ylab(<span class="m">0</span>(.<span class="m">4</span>)<span class="m">2.4</span>, 
		        angle(<span class="m">360</span>)    
<span class="k">			    format</span>(<span class="s">&quot;%3.1f&quot;</span>)
				)  
		    xti(<span class="s">&quot;Days after Dose 1&quot;</span>)  
		    legend(off) 
		    text(
			    <span class="m">2.3</span> <span class="m">100</span> 
			    <span class="s">&quot;Placebo&quot;</span>,  
			     col(navy)
				 )  
		    text(
			    .<span class="m">5</span> <span class="m">100</span> 
				<span class="s">&quot;BNT162b2&quot;</span>,  
			    col(maroon)
				) ;
<span class="k">		graph</span> export BNT162b2<span class="m">.</span>png,<span class="k"> replace</span> ;
<span class="k">		stcox</span> bnt ;
<span class="k">		drop</span> _<span class="o">*</span> age over55 days ;
<span class="k">		g</span> bnt_id=<span class="nf">round</span>(<span class="nf">runiform</span>(<span class="m">37</span>,<span class="m">37</span><span class="o">+</span>_N)) ;
<span class="k">		compress</span>  ;
		#delimit cr
		<span class="c1">//label variables</span>
<span class="k">		lab var</span> bnt_id <span class="s">&quot;Participant Identifier&quot;</span>
<span class="k">		lab var</span> bnt <span class="s">&quot;Random treatment assignment&quot;</span>
<span class="k">		lab var</span> female <span class="s">&quot;Gender at birth&quot;</span>
<span class="k">		lab var</span> race <span class="s">&quot;Self-identified race&quot;</span>
<span class="k">		lab var</span> ethnicity <span class="s">&quot;Hispanic ethnicity&quot;</span>
<span class="k">		lab var</span> country <span class="s">&quot;Country where trial was conducted&quot;</span>
<span class="k">		lab var</span> dob <span class="s">&quot;Date of birth&quot;</span>
<span class="k">		lab var</span> dor <span class="s">&quot;Date of recruitment into BNT162b2 trial&quot;</span>
<span class="k">		lab var</span> eft <span class="s">&quot;Date of exit from BNT162b2 trial&quot;</span>
<span class="k">		lab var</span> bmi <span class="s">&quot;Obese&quot;</span>
<span class="k">		lab var</span> covid  <span class="s">&quot;Covid-19 status on eft date&quot;</span>
		<span class="c1">//label data</span>
<span class="k">		lab</span> data <span class="s">&quot;Safety and Efficacy of the BNT162b2 mRNA Covid-19 Vaccine&quot;</span>
<span class="k">		describe</span>
<span class="k">		order</span> bnt_id dob female race ethnicity country bmi bnt eft covid 
<span class="c1">		*replace eft=. if eft&gt;d(15dec2020) //some folks lost to followup</span>
<span class="k">		save</span> BNT162b2,<span class="k"> replace</span> 

	}
<span class="k">  log close</span> 
	
</pre></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="detailed-breakdown-of-clinical-trial-data-simulation-bnt162b2-mrna-covid-19-vaccine">
<h1>Detailed Breakdown of Clinical Trial Data Simulation: <a class="reference external" href="https://www.nejm.org/doi/full/10.1056/nejmoa2034577">BNT162b2 mRNA Covid-19 Vaccine</a><a class="headerlink" href="#detailed-breakdown-of-clinical-trial-data-simulation-bnt162b2-mrna-covid-19-vaccine" title="Permalink to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>In this module, we explore the nuances of simulating a dataset for a randomized clinical trial, specifically modeled after the BNT162b2 mRNA COVID-19 vaccine trial. Our objective is to create a simulated dataset that mirrors the complexity and diversity of the actual trial, covering aspects such as participant demographics, vaccine efficacy, and follow-up times.</p>
</section>
<section id="simulation-process">
<h2>Simulation Process<a class="headerlink" href="#simulation-process" title="Permalink to this heading">#</a></h2>
<section id="step-1-preparing-the-environment">
<h3>Step 1: Preparing the Environment<a class="headerlink" href="#step-1-preparing-the-environment" title="Permalink to this heading">#</a></h3>
<p>Initial steps include setting up the working directory and logging all commands for reproducibility.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">clear</span>
<span class="k">set</span> seed <span class="m">340600</span>  <span class="c1">// Ensures reproducibility</span>
<span class="k">set</span> obs <span class="m">37706</span>  <span class="c1">// Matches the trial size</span>
</pre></div>
</div>
</section>
<section id="step-2-random-treatment-assignment">
<h3>Step 2: Random Treatment Assignment<a class="headerlink" href="#step-2-random-treatment-assignment" title="Permalink to this heading">#</a></h3>
<p>Simulate a 1:1 allocation to the vaccine or placebo group.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> bnt=<span class="nf">rbinomial</span>(<span class="m">1</span>,.<span class="m">5</span>)
<span class="k">label</span> define Bnt <span class="m">0</span> <span class="s">&quot;Placebo&quot;</span> <span class="m">1</span> <span class="s">&quot;BNT162b2&quot;</span>
<span class="k">label</span> values bnt Bnt
<span class="k">tabulate</span> bnt
</pre></div>
</div>
</section>
<section id="step-3-demographic-characteristics">
<h3>Step 3: Demographic Characteristics<a class="headerlink" href="#step-3-demographic-characteristics" title="Permalink to this heading">#</a></h3>
<p>We simulate key demographics including gender, race, ethnicity, and country, adhering to the trial’s reported distributions.</p>
<ul>
<li><p><strong>Gender</strong>: Reflects the nearly balanced gender distribution in the trial.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> female=<span class="nf">rbinomial</span>(<span class="m">1</span>, .<span class="m">494</span>)
</pre></div>
</div>
</li>
<li><p><strong>Race</strong>: Simulates the racial diversity among participants.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> race=<span class="nf">round</span>(<span class="nf">runiform</span>(<span class="m">0</span>,<span class="m">100</span>),.<span class="m">1</span>)
</pre></div>
</div>
</li>
<li><p><strong>Ethnicity and Country</strong>: Captures the ethnic background and the geographic diversity of the trial population.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> ethnicity=<span class="nf">rbinomial</span>(<span class="m">1</span>,<span class="m">0.28</span>)
<span class="k">generate</span> country=<span class="nf">round</span>(<span class="nf">runiform</span>(<span class="m">0</span>,<span class="m">100</span>), .<span class="m">1</span>)
</pre></div>
</div>
</li>
</ul>
</section>
<section id="step-4-age-distribution">
<h3>Step 4: Age Distribution<a class="headerlink" href="#step-4-age-distribution" title="Permalink to this heading">#</a></h3>
<p>Age is a critical factor in vaccine trials, affecting both efficacy and safety profiles.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> age=(<span class="nf">rt</span>(_N)<span class="o">*</span><span class="m">9.25</span>)<span class="o">+</span><span class="m">52</span>
</pre></div>
</div>
</section>
<section id="step-5-clinical-outcomes">
<h3>Step 5: Clinical Outcomes<a class="headerlink" href="#step-5-clinical-outcomes" title="Permalink to this heading">#</a></h3>
<p>Simulate the time until a COVID-19 event (infection) occurs post-vaccination, differentiating between vaccine and placebo groups to reflect the vaccine’s efficacy.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> days=rweibull(.<span class="m">7</span>,<span class="m">17</span>,<span class="m">0</span>)<span class="k"> if</span> bnt<span class="o">==</span><span class="m">0</span>
</pre></div>
</div>
</section>
<section id="step-6-follow-up-and-bmi">
<h3>Step 6: Follow-Up and BMI<a class="headerlink" href="#step-6-follow-up-and-bmi" title="Permalink to this heading">#</a></h3>
<p>These variables simulate additional health and trial participation factors, such as BMI and the duration of each participant’s follow-up.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">generate</span> bmi=<span class="nf">rbinomial</span>(<span class="m">1</span>, .<span class="m">351</span>)
</pre></div>
</div>
</section>
<section id="step-7-analysis">
<h3>Step 7: Analysis<a class="headerlink" href="#step-7-analysis" title="Permalink to this heading">#</a></h3>
<p>Perform a Kaplan-Meier survival analysis and a Cox proportional hazards model to analyze the simulated data’s safety and efficacy signals.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">sts graph</span>,<span class="k"> by</span>(bnt)
<span class="k">stcox</span> bnt
</pre></div>
</div>
</section>
<section id="step-8-data-labeling-and-export">
<h3>Step 8: Data Labeling and Export<a class="headerlink" href="#step-8-data-labeling-and-export" title="Permalink to this heading">#</a></h3>
<p>Final steps involve labeling each variable for clarity and exporting the dataset for further analysis.</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> variable bnt_id <span class="s">&quot;Participant Identifier&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="practical-application-and-analysis">
<h2>Practical Application and Analysis<a class="headerlink" href="#practical-application-and-analysis" title="Permalink to this heading">#</a></h2>
<section id="exercise">
<h3>Exercise:<a class="headerlink" href="#exercise" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><strong>Simulate Demographic Data</strong>: Extend the simulation to include detailed demographic characteristics (see the script above for tips). Analyze how different demographics might influence trial outcomes. Can you produce a Table 1? Does it meet your expectations?</p></li>
<li><p><strong>Outcome Analysis</strong>: Utilize the simulated outcome data to perform a Kaplan-Meier analysis. Discuss how the vaccine’s efficacy can vary across different subgroups within the trial.</p></li>
<li><p><strong>Report</strong>: For your own practice, ou may write a comprehensive report on your findings, including potential biases and limitations of your simulated data analysis.</p></li>
<li><p><strong>Homework</strong>: For week 1, we just want you to annotate the script above, so that one can understand what it performs. We’ll grade the .do file you submit after we run it on our machines. It should produce the graph below:</p></li>
</ol>
<p><img alt="" src="_images/BNT162b2.png" /></p>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading">#</a></h2>
<p>Through this detailed simulation, students are expected to gain a deeper understanding of the complexities involved in clinical trial data analysis. This exercise not only reinforces statistical and programming skills but also emphasizes the critical thinking needed to interpret trial results accurately.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">1. Philosophy, overview, commands, syntax</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#entry-poll">1.0 Entry poll</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#survey">1.0.1 Survey</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results">1.0.2 Results</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#from-a-simulation">From a simulation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#from-zoom-poll">From zoom Poll</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-format-specifiers-9s">1.0.3 Understanding Format Specifiers: <code class="docutils literal notranslate"><span class="pre">%9s</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#philosophy">1.1 Philosophy</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#know-be-reverent">1.1.2 Know &amp; be Reverent</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#do-on-time">1.1.3 Do &amp; on Time</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">1.2 Overview 🦀</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation">1.3 Simulation</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#detailed-breakdown-of-clinical-trial-data-simulation-bnt162b2-mrna-covid-19-vaccine">Detailed Breakdown of Clinical Trial Data Simulation: BNT162b2 mRNA Covid-19 Vaccine</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-process">Simulation Process</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-preparing-the-environment">Step 1: Preparing the Environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-random-treatment-assignment">Step 2: Random Treatment Assignment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-demographic-characteristics">Step 3: Demographic Characteristics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-age-distribution">Step 4: Age Distribution</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-5-clinical-outcomes">Step 5: Clinical Outcomes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-6-follow-up-and-bmi">Step 6: Follow-Up and BMI</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-7-analysis">Step 7: Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-8-data-labeling-and-export">Step 8: Data Labeling and Export</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practical-application-and-analysis">Practical Application and Analysis</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise">Exercise:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Abimereki Muzaale
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>